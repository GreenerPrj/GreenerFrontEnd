{"ast":null,"code":"var _jsxFileName = \"/Users/bag-yeongmi/GreenerFrontEnd/src/Components/pages/board/TalkWrite.js\",\n    _s = $RefreshSig$();\n\n// import React, { useState } from \"react\";\n// import axios from \"axios\";\n// const TalkWrite = () => {\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [tempFile, setTempFile] = useState(\"\");\n//     const onSubmit = async (e) => {\n//         e.preventDefault();\n//         const formData = new FormData();\n//         formData.append(\"file\",tempFile[0]);\n//         let dataSet = {\n//             title,\n//             content,\n//         };\n//       const json = JSON.stringify(dataSet)\n//       const blob = new Blob([json], { type: \"application/json\" });\n//       formData.append(\"request\", blob); \n//       axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//       axios.post(\"/api/v1/boards\", formData, {\n//             headers: {\n//             \"Content-Type\": \"multipart/form-data\", \n//         }})\n//         .then((response) => {\n//             console.log(response)\n//             window.location.href = \"/market\";\n//             alert('등록되었습니다.')}\n//         );\n//     }\n//     return (\n//       <form onSubmit={onSubmit}>\n//           제 목 <input \n//           value={title}\n//           onChange={(e)=> {setTitle(e.target.value)}}\n//           type=\"text\"\n//           placeholder=\"제목을 입력하세요\"\n//       /><br/>\n//       내 용 <input \n//           value={content}\n//           onChange={(e)=> {setContent(e.target.value)}}\n//           type=\"text\"\n//           placeholder=\"내용을 입력하세요\"\n//       /><br/>\n//         <input \n//           type=\"file\"\n//           multiple=\"multiple\"\n//           onChange={(e) => {setTempFile(e.target.files)}}\n//         /><br/>\n//         <button type=\"submit\">제출</button>\n//       </form>\n//   );\n// }\n// export default TalkWrite;\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Button } from \"react-bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst TalkWrite = () => {\n  _s();\n\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [img, setImg] = useState({\n    image_file: \"\",\n    preview_URL: \"img/default_image.png\"\n  });\n\n  const saveImage = e => {\n    e.preventDefault();\n\n    if (e.target.files[0]) {\n      URL.revokeObjectURL(img.preview_URL);\n      const preview_URL = URL.createObjectURL(e.target.files[0]);\n      setImg(() => ({\n        image_file: e.target.files[0],\n        preview_URL: preview_URL\n      }));\n    }\n  };\n\n  const deleteImage = () => {\n    URL.revokeObjectURL(img.preview_URL);\n    setImg({\n      image_file: \"\",\n      preview_URL: \"img/default_image.png\"\n    });\n  };\n\n  useEffect(() => {\n    return () => {\n      URL.revokeObjectURL(img.preview_URL);\n    };\n  }, []);\n\n  const onSubmit = async () => {\n    const formData = new FormData();\n\n    if (img.image_file) {\n      formData.append(\"file\", img.image_file);\n    }\n\n    let dataSet = {\n      categoryid: 2,\n      title,\n      content\n    };\n    const json = JSON.stringify(dataSet);\n    const blob = new Blob([json], {\n      type: \"application/json\"\n    });\n    formData.append(\"request\", blob);\n    axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n    await axios.post(\"/api/v1/boards\", formData, {\n      headers: {\n        \"Content-Type\": \"multipart/form-data\"\n      }\n    });\n    window.location.href = \"/market\";\n    alert('등록되었습니다.'); // setImg({\n    //   image_file: \"\",\n    //   preview_URL: \"img/default_image.png\"\n    // });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"form\", {\n    children: [\"\\uC81C \\uBAA9 \", /*#__PURE__*/_jsxDEV(\"input\", {\n      value: title,\n      onChange: e => {\n        setTitle(e.target.value);\n      },\n      type: \"text\",\n      placeholder: \"\\uC81C\\uBAA9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 15\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }, this), \"\\uB0B4 \\uC6A9 \", /*#__PURE__*/_jsxDEV(\"input\", {\n      value: content,\n      onChange: e => {\n        setContent(e.target.value);\n      },\n      type: \"text\",\n      placeholder: \"\\uB0B4\\uC6A9\\uC744 \\uC785\\uB825\\uD558\\uC138\\uC694\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      accept: \"image/*\",\n      onChange: saveImage,\n      onClick: e => e.target.value = null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: img.preview_URL,\n        width: \"20%\",\n        height: \"200px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        color: \"error\",\n        variant: \"contained\",\n        onClick: deleteImage,\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          class: \"fa-solid fa-xmark\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Button, {\n      color: \"success\",\n      variant: \"contained\",\n      onClick: onSubmit,\n      children: \"\\uC81C\\uCD9C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 142,\n    columnNumber: 7\n  }, this);\n};\n\n_s(TalkWrite, \"MfGAwvCO37K5ZFqYOnwfsAfu8T4=\");\n\n_c = TalkWrite;\nexport default TalkWrite;\n\nvar _c;\n\n$RefreshReg$(_c, \"TalkWrite\");","map":{"version":3,"names":["React","useEffect","useState","axios","Button","TalkWrite","title","setTitle","content","setContent","img","setImg","image_file","preview_URL","saveImage","e","preventDefault","target","files","URL","revokeObjectURL","createObjectURL","deleteImage","onSubmit","formData","FormData","append","dataSet","categoryid","json","JSON","stringify","blob","Blob","type","defaults","headers","common","localStorage","getItem","post","window","location","href","alert","value"],"sources":["/Users/bag-yeongmi/GreenerFrontEnd/src/Components/pages/board/TalkWrite.js"],"sourcesContent":["// import React, { useState } from \"react\";\n// import axios from \"axios\";\n\n// const TalkWrite = () => {\n\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [tempFile, setTempFile] = useState(\"\");\n\n//     const onSubmit = async (e) => {\n//         e.preventDefault();\n\n        \n//         const formData = new FormData();\n//         formData.append(\"file\",tempFile[0]);\n    \n//         let dataSet = {\n//             title,\n//             content,\n//         };\n      \n//       const json = JSON.stringify(dataSet)\n//       const blob = new Blob([json], { type: \"application/json\" });\n//       formData.append(\"request\", blob); \n\n\n//       axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//       axios.post(\"/api/v1/boards\", formData, {\n//             headers: {\n//             \"Content-Type\": \"multipart/form-data\", \n//         }})\n//         .then((response) => {\n//             console.log(response)\n//             window.location.href = \"/market\";\n//             alert('등록되었습니다.')}\n//         );\n//     }\n      \n      \n//     return (\n//       <form onSubmit={onSubmit}>\n//           제 목 <input \n//           value={title}\n//           onChange={(e)=> {setTitle(e.target.value)}}\n//           type=\"text\"\n//           placeholder=\"제목을 입력하세요\"\n//       /><br/>\n//       내 용 <input \n//           value={content}\n//           onChange={(e)=> {setContent(e.target.value)}}\n//           type=\"text\"\n//           placeholder=\"내용을 입력하세요\"\n//       /><br/>\n\n//         <input \n//           type=\"file\"\n//           multiple=\"multiple\"\n//           onChange={(e) => {setTempFile(e.target.files)}}\n//         /><br/>\n\n//         <button type=\"submit\">제출</button>\n//       </form>\n//   );\n// }\n\n// export default TalkWrite;\n\n\nimport React, { useEffect, useState } from \"react\";\nimport axios from \"axios\";\nimport { Button } from \"react-bootstrap\";\n\nconst TalkWrite = () => {\n\n    const [title, setTitle] = useState(\"\");\n    const [content, setContent] = useState(\"\");\n    const [img, setImg] = useState({\n      image_file: \"\",\n      preview_URL: \"img/default_image.png\"\n    });\n\n    const saveImage = (e) => {\n      e.preventDefault();\n      if(e.target.files[0]){\n        URL.revokeObjectURL(img.preview_URL);\n        const preview_URL = URL.createObjectURL(e.target.files[0]);\n        setImg(() => (\n          {\n            image_file: e.target.files[0],\n            preview_URL: preview_URL\n          }\n        ))\n      }\n    }\n\n    const deleteImage = () => {\n      URL.revokeObjectURL(img.preview_URL);\n      setImg({\n        image_file: \"\",\n        preview_URL: \"img/default_image.png\"\n      })\n    }\n\n    useEffect(() => {\n      return () => {\n        URL.revokeObjectURL(img.preview_URL)\n      }\n    }, [])\n\n    const onSubmit = async () => {\n      const formData = new FormData();\n        if(img.image_file){\n          \n          formData.append(\"file\", img.image_file);}\n    \n          let dataSet = {\n            categoryid: 2,\n            title,\n            content,\n          };\n      \n        const json = JSON.stringify(dataSet)\n        const blob = new Blob([json], { type: \"application/json\" });\n        formData.append(\"request\", blob); \n\n        axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n        await axios.post(\"/api/v1/boards\", formData, {\n              headers: {\n              \"Content-Type\": \"multipart/form-data\", \n          }})\n\n              window.location.href = \"/market\";\n              alert('등록되었습니다.');\n            // setImg({\n            //   image_file: \"\",\n            //   preview_URL: \"img/default_image.png\"\n            // });\n      \n    }\n   \n    return (\n      <form >\n          제 목 <input \n          value={title}\n          onChange={(e)=> {setTitle(e.target.value)}}\n          type=\"text\"\n          placeholder=\"제목을 입력하세요\"\n      /><br/>\n      내 용 <input \n          value={content}\n          onChange={(e)=> {setContent(e.target.value)}}\n          type=\"text\"\n          placeholder=\"내용을 입력하세요\"\n      /><br/>\n      \n        <input \n          type=\"file\"\n          accept=\"image/*\"\n          onChange={saveImage}\n          onClick={(e) => e.target.value = null}\n        />\n\n        <div>\n          <img src={img.preview_URL} width=\"20%\" height=\"200px\" />\n          <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n            <i class=\"fa-solid fa-xmark\"></i>\n          </Button>\n        </div>\n\n        <Button color=\"success\" variant=\"contained\" onClick={onSubmit}>\n          제출\n        </Button>\n\n      </form>\n  );\n}\n\nexport default TalkWrite;"],"mappings":"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"},"metadata":{},"sourceType":"module"}