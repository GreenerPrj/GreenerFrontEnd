{"ast":null,"code":"var _jsxFileName = \"/Users/bag-yeongmi/GreenerFrontEnd/src/Components/pages/board/MarketChange.js\",\n    _s = $RefreshSig$();\n\n// import React, { useState, useEffect } from \"react\";\n// import { useParams } from 'react-router-dom';\n// import axios from 'axios';\n// import { Button } from \"react-bootstrap\";\n// function MarketChange() {\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [img, setImg] = useState(\"\");\n//     const {boardsId} = useParams();\n//     const encodeFileToBase64 = (fileBlob) => {\n//       const reader = new FileReader();\n//       reader.readAsDataURL(fileBlob);\n//       return new Promise((resolve) => {\n//         reader.onload = () => {\n//           setImg(reader.result);\n//           resolve()\n//         }\n//       })\n//     }\n//     useEffect(() => {\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.get(`/api/v1/boards/${boardsId}/detail`)\n//         .then((response)  => { \n//           setTitle(response.data.title);\n//           setContent(response.data.content);\n//           setImg(response.data.img);\n//         })\n//       }, [])\n//       const data = {\n//         title: title,\n//         content: content,\n//     }\n//       function Update(e) {\n//         e.preventDefault()\n//         const formData = new FormData();\n//         formData.append(\"files\",img[0]);\n//       const json = JSON.stringify(data)\n//       const blob = new Blob([json], { type: \"application/json\" });\n//       formData.append(\"boardsUpdateRequest\", blob); \n//       console.log(formData)\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.put(`/api/v1/boards/${boardsId}`, formData)\n//         .then(\n//             // window.location.href = `/marketdetail/${boardsId}`,\n//             alert('수정되었습니다.')\n//         )\n//       }\n// return (\n//     <>\n//     <h1>수정하기</h1>\n//     <form>\n//     제 목 <input \n//         value={title}\n//         onChange={(e)=> {setTitle(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     내 용 <input \n//         value={content}\n//         onChange={(e)=> {setContent(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     이미지 <img \n//         src={img}\n//         alt=\"\"\n//         width=\"20%\" height=\"200px\"\n//     />\n//     <input \n//           type=\"file\"\n//           multiple=\"multiple\"\n//           onChange={(e) => {encodeFileToBase64(e.target.files[0])}}\n//         /><br/>\n//     <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//     <Button onClick={Update} variant=\"outline-success\">&nbsp; 수정 &nbsp;</Button>\n//     </form>\n//     </>\n//     )\n// }\n// export default MarketChange;\n// import React, { useState, useEffect } from \"react\";\n// import { useParams } from 'react-router-dom';\n// import axios from 'axios';\n// import { Button } from \"react-bootstrap\";\n// function MarketChange() {\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [img, setImg] = useState(\"\");\n//     const {boardsId} = useParams();\n//     const saveImage = (e) => {\n//       e.preventDefault();\n//       if(e.target.files[0]){\n//         URL.revokeObjectURL(img.preview_URL);\n//         const preview_URL = URL.createObjectURL(e.target.files[0]);\n//         setImg(() => (\n//           {\n//             image_file: e.target.files[0],\n//             preview_URL: preview_URL\n//           }\n//         ))\n//       }\n//       else {\n//         const preview_URL = `/api/v1/boards/${boardsId}/detail/images`\n//         setImg(() => (\n//           {\n//             preview_URL: preview_URL\n//           }\n//         )\n//        )\n//       }\n//     }\n//     const deleteImage = () => {\n//       URL.revokeObjectURL(img.preview_URL);\n//       setImg({\n//         image_file: \"\",\n//         preview_URL: \"img/default_image.png\"\n//       })\n//     }\n//     useEffect(() => {\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.get(`/api/v1/boards/${boardsId}/detail`)\n//         .then((response)  => { \n//           setTitle(response.data.title);\n//           setContent(response.data.content);\n//           setImg(response.data.img);\n//         })\n//         .then()\n//       }, [])\n//       const Update = async () => {\n//         const formData = new FormData();\n//         if(img.image_file){\n//           formData.append(\"files\", img.image_file);}\n//           const data = {\n//             title,\n//             content\n//         }\n//         const json = JSON.stringify(data)\n//         const blob = new Blob([json], { type: \"application/json\" });\n//         formData.append(\"boardsUpdateRequest\", blob); \n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.put(`/api/v1/boards/${boardsId}`, formData, {\n//           headers: {\n//           \"Content-Type\": \"multipart/form-data\", \n//       }})\n//         .then(\n//             // window.location.href = \"/market\",\n//             alert('수정되었습니다.')\n//         )\n//       }\n// return (\n//     <>\n//     <h1>수정하기</h1>\n//     <form>\n//     제 목 <input \n//         value={title}\n//         onChange={(e)=> {setTitle(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     내 용 <input \n//         value={content}\n//         onChange={(e)=> {setContent(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     이미지 <img \n//         src={img}\n//         alt=\"\"\n//         width=\"20%\" height=\"200px\"\n//     />\n//       <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//         <i class=\"fa-solid fa-xmark\"></i>\n//       </Button>\n//     <input \n//               type=\"file\"\n//               accept=\"image/*\"\n//               onChange={saveImage}\n//               onClick={(e) => e.target.value = null}\n//             />\n// <div>\n//           <img src={img.preview_URL} width=\"20%\" height=\"200px\" />\n//           <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//             <i class=\"fa-solid fa-xmark\"></i>\n//           </Button>\n//         </div><br/>\n//     <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//     <Button onClick={Update} variant=\"outline-success\">&nbsp; 수정 &nbsp;</Button>\n//     </form>\n//     </>\n//     )\n// }\n// export default MarketChange;\n// import {useSelector} from \"react-redux\";\n// import {useNavigate, useParams} from \"react-router-dom\";\n// import {useCallback, useEffect, useState} from \"react\";\n// import {Button} from \"@mui/material\";\n// import axios from \"axios\";\n// const MarketChange = () => {\n//   const navigate = useNavigate();\n//   // URI 파라미터 가져오기\n//   const {boardsId} = useParams();\n//   // 게시판 제목, 내용, 사진\n//   const [title, setTitle] = useState(\"\");\n//   const [content, setContent] = useState(\"\");\n//   const [image, setImage] = useState({\n//     image_file: \"\",\n//     preview_URL: \"img/default_image.png\",\n//   });\n//   // 사용자가 직전에 등록한 게시물의 상태를 그대로 보여주기 위해\n//   // 컴포넌트가 마운트되고 URI 파라미터에 해당하는 board를 가져와서\n//   // title, content, image의 상태를 바꿔줌\n//   useEffect(() => {\n//     const getBoard = async () => {\n//       const {data} = await axios.get(`/api/v1/boards/${boardsId}/detail`);\n//       return data;\n//     }\n//     getBoard().then((result) => {\n//       setTitle(result.title);\n//       setContent(result.content);\n//       // 이미지는 파일을 불러올 필요가 없이 미리보기 url만 가져온다.\n//       // 이미지를 선택하지 않고 올리면 db에 저장되어 있는 이미지를 그대로 사용!\n//       setImage(result.image)\n//     });\n//   }, [])\n//   const canSubmit = useCallback(() => {\n//     return content !== \"\" && title !== \"\";\n//   }, [image, title, content]);\n//   const handleSubmit = useCallback(async () => {\n//     try {\n//       const formData = new FormData();\n//       formData.append(\"title\", title);\n//       formData.append(\"content\", content);\n//       // 이미지를 선택했을 때만 formdata에 넣음\n//       formData.append(\"file\", image.image_file);\n//       // 수정할 땐 board_id를 보내자\n//       formData.append(\"id\", boardsId);\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.put(`/api/v1/boards/${boardsId}`, formData, {\n//           headers: {\n//           \"Content-Type\": \"multipart/form-data\", \n//       }})\n//       window.alert(\"😎수정이 완료되었습니다😎\");\n//       // 이전 페이지로 돌아가기\n//       window.location.href = `/marketdetail/${boardsId}`;\n//     } catch (e) {\n//       // 서버에서 받은 에러 메시지 출력\n//     }\n//   }, [canSubmit]);\n//   return (\n//       <>\n//       <h1>수정하기</h1>\n//       <form>\n//       제 목 <input \n//           value={title}\n//           onChange={(e)=> {setTitle(e.target.value)}}\n//           type=\"text\"\n//       /><br/>\n//       내 용 <input \n//           value={content}\n//           onChange={(e)=> {setContent(e.target.value)}}\n//           type=\"text\"\n//       /><br/>\n//       이미지 <img \n//           src={image}\n//           alt=\"\"\n//           width=\"20%\" height=\"200px\"\n//       />\n//         {/* <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//           <i class=\"fa-solid fa-xmark\"></i>\n//         </Button> */}\n//       <input \n//                 type=\"file\"\n//                 accept=\"image/*\"\n//                 // onChange={saveImage}\n//                 onClick={(e) => e.target.value = null}\n//               />\n//   <div>\n//             <img src={image.preview_URL} width=\"20%\" height=\"200px\" />\n//             {/* <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//               <i class=\"fa-solid fa-xmark\"></i>\n//             </Button> */}\n//           </div><br/>\n//       <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//       <Button onClick={handleSubmit} variant=\"outline-success\">&nbsp; 수정 &nbsp;</Button>\n//       </form>\n//       </>\n//       )\n// }\n// export default MarketChange;\n// import {useSelector} from \"react-redux\";\n// import {useNavigate, useParams} from \"react-router-dom\";\n// import {useCallback, useEffect, useState} from \"react\";\n// import ImageUploader from \"./ImageUploader\";\n// import TextArea from \"./TextArea\";\n// import {Button} from \"@mui/material\";\n// import axios from \"axios\";\n// const MarketChange = () => {\n//   const navigate = useNavigate();\n//   // URI 파라미터 가져오기\n//   const {boardsId} = useParams();\n//   // 게시판 제목, 내용, 사진\n//   const [title, setTitle] = useState(\"\");\n//   const [content, setContent] = useState(\"\");\n//   const [image, setImage] = useState(\"\")\n//   // ({\n//   //   image_file: \"\",\n//   //   preview_URL: `/api/v1/boards/${boardsId}/detail/images`});\n//   // 사용자가 직전에 등록한 게시물의 상태를 그대로 보여주기 위해\n//   // 컴포넌트가 마운트되고 URI 파라미터에 해당하는 board를 가져와서\n//   // title, content, image의 상태를 바꿔줌\n//   useEffect(() => {\n//     const getBoard = async () => {\n//       axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//       const {data} = await axios.get(`/api/v1/boards/${boardsId}/detail`);\n//       return data;\n//     }\n//     getBoard().then((result) => {\n//       console.log(result)\n//       setTitle(result.title);\n//       setContent(result.content);\n//       // 이미지는 파일을 불러올 필요가 없이 미리보기 url만 가져온다.\n//       // 이미지를 선택하지 않고 올리면 db에 저장되어 있는 이미지를 그대로 사용!\n//       setImage({...image, preview_URL: `/api/v1/boards/${boardsId}/detail/images`})\n//       console.log(result.img)\n//       console.log(image)\n//     });\n//   }, [])\n//   const canSubmit = useCallback(() => {\n//     return content !== \"\" && title !== \"\";\n//   }, [image, title, content]);\n//   const handleSubmit = useCallback(async () => {\n//     try {\n//       const formData = new FormData();\n//       const data = {\n//         title: title,\n//         content: content\n//       }\n//       const json = JSON.stringify(data)\n//       const blob = new Blob([json], { type: \"application/json\" });\n//       formData.append(\"boardsUpdateRequest\", blob);\n//       formData.append(\"files\", image.image_file);\n//       console.log(...formData)\n//       // formData.append(\"title\", title);\n//       // formData.append(\"content\", content);\n//       // // 이미지를 선택했을 때만 formdata에 넣음\n//       // formData.append(\"file\", image.image_file);\n//       // // 수정할 땐 board_id를 보내자\n//       axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//       await axios.put(`/api/v1/boards/${boardsId}`, formData);\n//       window.alert(\"😎수정이 완료되었습니다😎\");\n//       // 이전 페이지로 돌아가기\n//       window.location.href = `/marketdetail/${boardsId}`;\n//     } catch (e) {\n//       // 서버에서 받은 에러 메시지 출력\n//     }\n//   }, [canSubmit]);\n//   return (\n//     <div className=\"addBoard-wrapper\">\n//       <div className=\"addBoard-header\">\n//         게시물 수정하기 🖊️\n//       </div>\n//       <div className=\"submitButton\">\n//         {canSubmit() ? (\n//           <Button\n//             onClick={handleSubmit}\n//             className=\"success-button\"\n//             variant=\"outlined\"\n//           >\n//             수정하기😃\n//           </Button>\n//         ) : (\n//           <Button\n//             className=\"disable-button\"\n//             variant=\"outlined\"\n//             size=\"large\"\n//           >\n//             제목과 내용을 모두 입력하세요😭\n//           </Button>\n//         )}\n//       </div>\n//       <div className=\"addBoard-body\">\n//         <ImageUploader setImage={setImage} preview_URL={image.preview_URL} width=\"20%\" height=\"200px\"/>\n//         <TextArea setTitle={setTitle} setContent={setContent} title={title} content={content}/>\n//       </div>\n//     </div>\n//   );\n// }\n// export default MarketChange\n// import React, { useEffect, useState } from \"react\";\n// import { useParams } from 'react-router-dom';\n// import axios from \"axios\";\n// import { Button } from \"react-bootstrap\";\n// const MarketChange = () => {\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [img, setImg] = useState({\n//       image_file: \"\",\n//       preview_URL: \"img/default_image.png\"\n//     });\n//     const {boardsId} = useParams();\n//     const saveImage = (e) => {\n//       e.preventDefault();\n//       if(e.target.files[0]){\n//         URL.revokeObjectURL(img.preview_URL);\n//         const preview_URL = URL.createObjectURL(e.target.files[0]);\n//         setImg(() => (\n//           {\n//             image_file: e.target.files[0],\n//             preview_URL: preview_URL\n//           }\n//         ))\n//       }\n//     }\n//     const deleteImage = () => {\n//       URL.revokeObjectURL(img.preview_URL);\n//       setImg({\n//         image_file: \"\",\n//         preview_URL: \"img/default_image.png\"\n//       })\n//     }\n//   //   useEffect(() => {\n//   //     axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//   //     axios.get(`/api/v1/boards/${boardsId}/detail`)\n//   //     .then((response)  => { \n//   //       setTitle(response.data.title);\n//   //       setContent(response.data.content);\n//   //       setImg(response.data.img);\n//   //     })\n//   //   }, [])\n//   //   const data = {\n//   //     title: title,\n//   //     content: content,\n//   // }\n//   //   function Update(e) {\n//   //     e.preventDefault()\n//   //     const formData = new FormData();\n//   //     formData.append(\"files\",img[0]);\n//   //   const json = JSON.stringify(data)\n//   //   const blob = new Blob([json], { type: \"application/json\" });\n//   //   formData.append(\"boardsUpdateRequest\", blob); \n//   //   console.log(formData)\n//   //     axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//   //     axios.put(`/api/v1/boards/${boardsId}`, formData)\n//   //     .then(\n//   //         // window.location.href = `/marketdetail/${boardsId}`,\n//   //         alert('수정되었습니다.')\n//   //     )\n//   //   }\n//     useEffect(() => {\n//       axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//       axios.get(`/api/v1/boards/${boardsId}/detail`)\n//       .then((response)  => { \n//         setTitle(response.data.title);\n//         setContent(response.data.content);\n//         setImg(response.data.img);\n//       })\n//     }, [])\n//     const onSubmit = async () => {\n//       const formData = new FormData();\n//         if(img.image_file){\n//           formData.append(\"files\", img.image_file);}\n//           let dataSet = {\n//             title,\n//             content,\n//           };\n//         const json = JSON.stringify(dataSet)\n//         const blob = new Blob([json], { type: \"application/json\" });\n//         formData.append(\"boardsUpdateRequest\", blob); \n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         await axios.put(`/api/v1/boards/${boardsId}`, formData, {\n//               headers: {\n//               \"Content-Type\": \"multipart/form-data\", \n//           }})\n//             window.location.href = `/marketdetail/${boardsId}`;\n//             alert('수정되었습니다.');\n//     }\n//     return (\n//       <form >\n//           제 목 <input \n//           value={title}\n//           onChange={(e)=> {setTitle(e.target.value)}}\n//           type=\"text\"\n//           placeholder=\"제목을 입력하세요\"\n//       /><br/>\n//       내 용 <input \n//           value={content}\n//           onChange={(e)=> {setContent(e.target.value)}}\n//           type=\"text\"\n//           placeholder=\"내용을 입력하세요\"\n//       /><br/>\n//       이미지 <img \n//           src={img}\n//           alt=\"\"\n//           width=\"20%\" height=\"200px\"\n//           onChange={(e)=> {setImg(e.target.files)}}\n//       />\n//         <input \n//           type=\"file\"\n//           accept=\"image/*\"\n//           onChange={saveImage}\n//           onClick={(e) => e.target.value = null}\n//         /><br/>\n//         <div>\n//           <img src={img.preview_URL} width=\"20%\" height=\"200px\" />\n//           <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//             <i class=\"fa-solid fa-xmark\"></i>\n//           </Button>\n//         </div>\n//         <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//         <Button variant=\"outline-success\" onClick={onSubmit}>\n//           수정\n//         </Button>\n//       </form>\n//   );\n// }\n// export default MarketChange;\nimport { useSelector } from \"react-redux\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport { useCallback, useEffect, useState } from \"react\";\nimport ImageUploader from \"./ImageUploader\";\nimport TextArea from \"./TextArea\";\nimport { Button } from \"@mui/material\";\nimport axios from \"axios\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MarketChange = () => {\n  _s();\n\n  const navigate = useNavigate(); // URI 파라미터 가져오기\n\n  const {\n    boardsId\n  } = useParams(); // 게시판 제목, 내용, 사진\n\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [image, setImage] = useState({\n    image_file: \"\",\n    preview_URL: `/api/v1/boards/${boardsId}/detail/images`\n  }); // 사용자가 직전에 등록한 게시물의 상태를 그대로 보여주기 위해\n  // 컴포넌트가 마운트되고 URI 파라미터에 해당하는 board를 가져와서\n  // title, content, image의 상태를 바꿔줌\n\n  useEffect(() => {\n    const getBoard = async () => {\n      axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n      const {\n        data\n      } = await axios.get(`/api/v1/boards/${boardsId}/detail`);\n      return data;\n    };\n\n    getBoard().then(result => {\n      console.log(result);\n      setTitle(result.title);\n      setContent(result.content); // 이미지는 파일을 불러올 필요가 없이 미리보기 url만 가져온다.\n      // 이미지를 선택하지 않고 올리면 db에 저장되어 있는 이미지를 그대로 사용!\n\n      setImage({ ...image,\n        preview_URL: `/api/v1/boards/${boardsId}/detail/images`\n      });\n      console.log(result.img);\n      console.log(image);\n    });\n  }, []);\n  const canSubmit = useCallback(() => {\n    return content !== \"\" && title !== \"\";\n  }, [image, title, content]);\n  const handleSubmit = useCallback(async () => {\n    try {\n      const formData = new FormData();\n      const data = {\n        title: title,\n        content: content\n      };\n      const json = JSON.stringify(data);\n      const blob = new Blob([json], {\n        type: \"application/json\"\n      });\n      formData.append(\"boardsUpdateRequest\", blob);\n      formData.append(\"files\", image.image_file);\n      console.log(...formData); // formData.append(\"title\", title);\n      // formData.append(\"content\", content);\n      // // 이미지를 선택했을 때만 formdata에 넣음\n      // formData.append(\"file\", image.image_file);\n      // // 수정할 땐 board_id를 보내자\n\n      axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n      await axios.put(`/api/v1/boards/${boardsId}`, formData);\n      window.alert(\"😎수정이 완료되었습니다😎\"); // 이전 페이지로 돌아가기\n\n      window.location.href = `/marketdetail/${boardsId}`;\n    } catch (e) {// 서버에서 받은 에러 메시지 출력\n    }\n  }, [canSubmit]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"addBoard-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"addBoard-header\",\n      children: \"\\uAC8C\\uC2DC\\uBB3C \\uC218\\uC815\\uD558\\uAE30 \\uD83D\\uDD8A\\uFE0F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 733,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"addBoard-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text\",\n        children: [\"\\uC81C \\uBAA9 \", /*#__PURE__*/_jsxDEV(\"input\", {\n          onChange: e => {\n            setTitle(e.target.value);\n          },\n          className: \"title\",\n          value: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 739,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 743,\n          columnNumber: 13\n        }, this), \"\\uB0B4 \\uC6A9 \", /*#__PURE__*/_jsxDEV(\"textarea\", {\n          onChange: e => {\n            setContent(e.target.value);\n          },\n          className: \"text\",\n          value: content\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 744,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 738,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ImageUploader, {\n        setImage: setImage,\n        preview_URL: image.preview_URL,\n        width: \"20%\",\n        height: \"200px\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 750,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 737,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"submitButton\",\n      children: canSubmit() ? /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleSubmit,\n        className: \"success-button\",\n        variant: \"outlined\",\n        children: \"\\uC218\\uC815\\uD558\\uAE30\\uD83D\\uDE03\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        className: \"disable-button\",\n        variant: \"outlined\",\n        size: \"large\",\n        children: \"\\uC81C\\uBAA9\\uACFC \\uB0B4\\uC6A9\\uC744 \\uBAA8\\uB450 \\uC785\\uB825\\uD558\\uC138\\uC694\\uD83D\\uDE2D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 763,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 753,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 732,\n    columnNumber: 5\n  }, this);\n};\n\n_s(MarketChange, \"bsS7Hjt7GJmXZljre6DOJulWlA0=\", false, function () {\n  return [useNavigate, useParams];\n});\n\n_c = MarketChange;\nexport default MarketChange;\n\nvar _c;\n\n$RefreshReg$(_c, \"MarketChange\");","map":{"version":3,"names":["useSelector","useNavigate","useParams","useCallback","useEffect","useState","ImageUploader","TextArea","Button","axios","MarketChange","navigate","boardsId","title","setTitle","content","setContent","image","setImage","image_file","preview_URL","getBoard","defaults","headers","common","localStorage","getItem","data","get","then","result","console","log","img","canSubmit","handleSubmit","formData","FormData","json","JSON","stringify","blob","Blob","type","append","put","window","alert","location","href","e","target","value"],"sources":["/Users/bag-yeongmi/GreenerFrontEnd/src/Components/pages/board/MarketChange.js"],"sourcesContent":["// import React, { useState, useEffect } from \"react\";\n// import { useParams } from 'react-router-dom';\n// import axios from 'axios';\n// import { Button } from \"react-bootstrap\";\n\n// function MarketChange() {\n\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [img, setImg] = useState(\"\");\n\n//     const {boardsId} = useParams();\n\n//     const encodeFileToBase64 = (fileBlob) => {\n//       const reader = new FileReader();\n//       reader.readAsDataURL(fileBlob);\n//       return new Promise((resolve) => {\n//         reader.onload = () => {\n//           setImg(reader.result);\n//           resolve()\n//         }\n//       })\n//     }\n\n//     useEffect(() => {\n       \n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.get(`/api/v1/boards/${boardsId}/detail`)\n        \n//         .then((response)  => { \n//           setTitle(response.data.title);\n//           setContent(response.data.content);\n//           setImg(response.data.img);\n//         })\n        \n//       }, [])\n      \n//       const data = {\n//         title: title,\n//         content: content,\n\n//     }\n\n//       function Update(e) {\n//         e.preventDefault()\n\n//         const formData = new FormData();\n//         formData.append(\"files\",img[0]);\n    \n      \n//       const json = JSON.stringify(data)\n//       const blob = new Blob([json], { type: \"application/json\" });\n//       formData.append(\"boardsUpdateRequest\", blob); \n\n//       console.log(formData)\n\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.put(`/api/v1/boards/${boardsId}`, formData)\n//         .then(\n//             // window.location.href = `/marketdetail/${boardsId}`,\n//             alert('수정되었습니다.')\n//         )\n//       }\n\n// return (\n//     <>\n//     <h1>수정하기</h1>\n//     <form>\n//     제 목 <input \n//         value={title}\n//         onChange={(e)=> {setTitle(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     내 용 <input \n//         value={content}\n//         onChange={(e)=> {setContent(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     이미지 <img \n//         src={img}\n//         alt=\"\"\n//         width=\"20%\" height=\"200px\"\n//     />\n\n//     <input \n//           type=\"file\"\n//           multiple=\"multiple\"\n//           onChange={(e) => {encodeFileToBase64(e.target.files[0])}}\n          \n//         /><br/>\n\n//     <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//     <Button onClick={Update} variant=\"outline-success\">&nbsp; 수정 &nbsp;</Button>\n\n//     </form>\n//     </>\n//     )\n// }\n\n// export default MarketChange;\n\n\n\n\n// import React, { useState, useEffect } from \"react\";\n// import { useParams } from 'react-router-dom';\n// import axios from 'axios';\n// import { Button } from \"react-bootstrap\";\n\n// function MarketChange() {\n\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [img, setImg] = useState(\"\");\n\n//     const {boardsId} = useParams();\n\n//     const saveImage = (e) => {\n//       e.preventDefault();\n//       if(e.target.files[0]){\n//         URL.revokeObjectURL(img.preview_URL);\n//         const preview_URL = URL.createObjectURL(e.target.files[0]);\n//         setImg(() => (\n//           {\n//             image_file: e.target.files[0],\n//             preview_URL: preview_URL\n//           }\n//         ))\n\n//       }\n//       else {\n//         const preview_URL = `/api/v1/boards/${boardsId}/detail/images`\n//         setImg(() => (\n//           {\n\n//             preview_URL: preview_URL\n//           }\n//         )\n//        )\n//       }\n//     }\n\n//     const deleteImage = () => {\n//       URL.revokeObjectURL(img.preview_URL);\n//       setImg({\n//         image_file: \"\",\n//         preview_URL: \"img/default_image.png\"\n//       })\n//     }\n\n//     useEffect(() => {\n      \n       \n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.get(`/api/v1/boards/${boardsId}/detail`)\n        \n//         .then((response)  => { \n//           setTitle(response.data.title);\n//           setContent(response.data.content);\n//           setImg(response.data.img);\n//         })\n//         .then()\n        \n//       }, [])\n      \n\n\n//       const Update = async () => {\n\n//         const formData = new FormData();\n//         if(img.image_file){\n          \n//           formData.append(\"files\", img.image_file);}\n\n//           const data = {\n//             title,\n//             content\n//         }\n\n//         const json = JSON.stringify(data)\n//         const blob = new Blob([json], { type: \"application/json\" });\n//         formData.append(\"boardsUpdateRequest\", blob); \n\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.put(`/api/v1/boards/${boardsId}`, formData, {\n//           headers: {\n//           \"Content-Type\": \"multipart/form-data\", \n//       }})\n//         .then(\n//             // window.location.href = \"/market\",\n//             alert('수정되었습니다.')\n//         )\n//       }\n\n// return (\n//     <>\n//     <h1>수정하기</h1>\n//     <form>\n//     제 목 <input \n//         value={title}\n//         onChange={(e)=> {setTitle(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     내 용 <input \n//         value={content}\n//         onChange={(e)=> {setContent(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     이미지 <img \n//         src={img}\n//         alt=\"\"\n//         width=\"20%\" height=\"200px\"\n//     />\n//       <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//         <i class=\"fa-solid fa-xmark\"></i>\n//       </Button>\n\n//     <input \n//               type=\"file\"\n//               accept=\"image/*\"\n//               onChange={saveImage}\n//               onClick={(e) => e.target.value = null}\n//             />\n\n// <div>\n//           <img src={img.preview_URL} width=\"20%\" height=\"200px\" />\n//           <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//             <i class=\"fa-solid fa-xmark\"></i>\n//           </Button>\n//         </div><br/>\n\n//     <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//     <Button onClick={Update} variant=\"outline-success\">&nbsp; 수정 &nbsp;</Button>\n\n//     </form>\n//     </>\n//     )\n// }\n\n// export default MarketChange;\n\n\n// import {useSelector} from \"react-redux\";\n// import {useNavigate, useParams} from \"react-router-dom\";\n// import {useCallback, useEffect, useState} from \"react\";\n// import {Button} from \"@mui/material\";\n// import axios from \"axios\";\n\n\n\n// const MarketChange = () => {\n//   const navigate = useNavigate();\n//   // URI 파라미터 가져오기\n//   const {boardsId} = useParams();\n//   // 게시판 제목, 내용, 사진\n//   const [title, setTitle] = useState(\"\");\n//   const [content, setContent] = useState(\"\");\n//   const [image, setImage] = useState({\n//     image_file: \"\",\n//     preview_URL: \"img/default_image.png\",\n//   });\n\n//   // 사용자가 직전에 등록한 게시물의 상태를 그대로 보여주기 위해\n//   // 컴포넌트가 마운트되고 URI 파라미터에 해당하는 board를 가져와서\n//   // title, content, image의 상태를 바꿔줌\n//   useEffect(() => {\n//     const getBoard = async () => {\n//       const {data} = await axios.get(`/api/v1/boards/${boardsId}/detail`);\n//       return data;\n//     }\n//     getBoard().then((result) => {\n//       setTitle(result.title);\n//       setContent(result.content);\n//       // 이미지는 파일을 불러올 필요가 없이 미리보기 url만 가져온다.\n//       // 이미지를 선택하지 않고 올리면 db에 저장되어 있는 이미지를 그대로 사용!\n//       setImage(result.image)\n//     });\n//   }, [])\n\n//   const canSubmit = useCallback(() => {\n//     return content !== \"\" && title !== \"\";\n//   }, [image, title, content]);\n\n//   const handleSubmit = useCallback(async () => {\n//     try {\n//       const formData = new FormData();\n//       formData.append(\"title\", title);\n//       formData.append(\"content\", content);\n//       // 이미지를 선택했을 때만 formdata에 넣음\n//       formData.append(\"file\", image.image_file);\n//       // 수정할 땐 board_id를 보내자\n//       formData.append(\"id\", boardsId);\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.put(`/api/v1/boards/${boardsId}`, formData, {\n//           headers: {\n//           \"Content-Type\": \"multipart/form-data\", \n//       }})\n//       window.alert(\"😎수정이 완료되었습니다😎\");\n//       // 이전 페이지로 돌아가기\n//       window.location.href = `/marketdetail/${boardsId}`;\n//     } catch (e) {\n//       // 서버에서 받은 에러 메시지 출력\n\n//     }\n\n//   }, [canSubmit]);\n\n//   return (\n//       <>\n//       <h1>수정하기</h1>\n//       <form>\n//       제 목 <input \n//           value={title}\n//           onChange={(e)=> {setTitle(e.target.value)}}\n//           type=\"text\"\n//       /><br/>\n//       내 용 <input \n//           value={content}\n//           onChange={(e)=> {setContent(e.target.value)}}\n//           type=\"text\"\n//       /><br/>\n//       이미지 <img \n//           src={image}\n//           alt=\"\"\n//           width=\"20%\" height=\"200px\"\n//       />\n//         {/* <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//           <i class=\"fa-solid fa-xmark\"></i>\n//         </Button> */}\n\n//       <input \n//                 type=\"file\"\n//                 accept=\"image/*\"\n//                 // onChange={saveImage}\n//                 onClick={(e) => e.target.value = null}\n//               />\n\n//   <div>\n//             <img src={image.preview_URL} width=\"20%\" height=\"200px\" />\n//             {/* <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//               <i class=\"fa-solid fa-xmark\"></i>\n//             </Button> */}\n//           </div><br/>\n\n//       <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//       <Button onClick={handleSubmit} variant=\"outline-success\">&nbsp; 수정 &nbsp;</Button>\n\n//       </form>\n//       </>\n//       )\n// }\n\n// export default MarketChange;\n\n\n// import {useSelector} from \"react-redux\";\n// import {useNavigate, useParams} from \"react-router-dom\";\n// import {useCallback, useEffect, useState} from \"react\";\n// import ImageUploader from \"./ImageUploader\";\n// import TextArea from \"./TextArea\";\n// import {Button} from \"@mui/material\";\n// import axios from \"axios\";\n\n\n// const MarketChange = () => {\n//   const navigate = useNavigate();\n//   // URI 파라미터 가져오기\n//   const {boardsId} = useParams();\n//   // 게시판 제목, 내용, 사진\n//   const [title, setTitle] = useState(\"\");\n//   const [content, setContent] = useState(\"\");\n//   const [image, setImage] = useState(\"\")\n//   // ({\n//   //   image_file: \"\",\n//   //   preview_URL: `/api/v1/boards/${boardsId}/detail/images`});\n\n//   // 사용자가 직전에 등록한 게시물의 상태를 그대로 보여주기 위해\n//   // 컴포넌트가 마운트되고 URI 파라미터에 해당하는 board를 가져와서\n//   // title, content, image의 상태를 바꿔줌\n//   useEffect(() => {\n//     const getBoard = async () => {\n//       axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//       const {data} = await axios.get(`/api/v1/boards/${boardsId}/detail`);\n//       return data;\n//     }\n//     getBoard().then((result) => {\n//       console.log(result)\n//       setTitle(result.title);\n//       setContent(result.content);\n//       // 이미지는 파일을 불러올 필요가 없이 미리보기 url만 가져온다.\n//       // 이미지를 선택하지 않고 올리면 db에 저장되어 있는 이미지를 그대로 사용!\n//       setImage({...image, preview_URL: `/api/v1/boards/${boardsId}/detail/images`})\n//       console.log(result.img)\n//       console.log(image)\n//     });\n//   }, [])\n\n//   const canSubmit = useCallback(() => {\n//     return content !== \"\" && title !== \"\";\n//   }, [image, title, content]);\n\n\n\n//   const handleSubmit = useCallback(async () => {\n//     try {\n\n//       const formData = new FormData();\n      \n//       const data = {\n//         title: title,\n//         content: content\n//       }\n//       const json = JSON.stringify(data)\n//       const blob = new Blob([json], { type: \"application/json\" });\n//       formData.append(\"boardsUpdateRequest\", blob);\n\n//       formData.append(\"files\", image.image_file);\n\n//       console.log(...formData)\n\n//       // formData.append(\"title\", title);\n//       // formData.append(\"content\", content);\n//       // // 이미지를 선택했을 때만 formdata에 넣음\n//       // formData.append(\"file\", image.image_file);\n//       // // 수정할 땐 board_id를 보내자\n\n//       axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//       await axios.put(`/api/v1/boards/${boardsId}`, formData);\n//       window.alert(\"😎수정이 완료되었습니다😎\");\n//       // 이전 페이지로 돌아가기\n//       window.location.href = `/marketdetail/${boardsId}`;\n//     } catch (e) {\n//       // 서버에서 받은 에러 메시지 출력\n\n//     }\n\n//   }, [canSubmit]);\n\n//   return (\n//     <div className=\"addBoard-wrapper\">\n//       <div className=\"addBoard-header\">\n//         게시물 수정하기 🖊️\n//       </div>\n//       <div className=\"submitButton\">\n//         {canSubmit() ? (\n//           <Button\n//             onClick={handleSubmit}\n//             className=\"success-button\"\n//             variant=\"outlined\"\n//           >\n//             수정하기😃\n//           </Button>\n//         ) : (\n//           <Button\n//             className=\"disable-button\"\n//             variant=\"outlined\"\n//             size=\"large\"\n//           >\n//             제목과 내용을 모두 입력하세요😭\n//           </Button>\n//         )}\n//       </div>\n//       <div className=\"addBoard-body\">\n\n//         <ImageUploader setImage={setImage} preview_URL={image.preview_URL} width=\"20%\" height=\"200px\"/>\n//         <TextArea setTitle={setTitle} setContent={setContent} title={title} content={content}/>\n//       </div>\n//     </div>\n//   );\n// }\n\n// export default MarketChange\n\n\n// import React, { useEffect, useState } from \"react\";\n// import { useParams } from 'react-router-dom';\n// import axios from \"axios\";\n// import { Button } from \"react-bootstrap\";\n\n// const MarketChange = () => {\n\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [img, setImg] = useState({\n//       image_file: \"\",\n//       preview_URL: \"img/default_image.png\"\n//     });\n\n    \n\n//     const {boardsId} = useParams();\n\n//     const saveImage = (e) => {\n//       e.preventDefault();\n//       if(e.target.files[0]){\n//         URL.revokeObjectURL(img.preview_URL);\n//         const preview_URL = URL.createObjectURL(e.target.files[0]);\n//         setImg(() => (\n//           {\n//             image_file: e.target.files[0],\n//             preview_URL: preview_URL\n//           }\n//         ))\n//       }\n//     }\n\n//     const deleteImage = () => {\n//       URL.revokeObjectURL(img.preview_URL);\n//       setImg({\n//         image_file: \"\",\n//         preview_URL: \"img/default_image.png\"\n//       })\n//     }\n\n\n//   //   useEffect(() => {\n       \n//   //     axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//   //     axios.get(`/api/v1/boards/${boardsId}/detail`)\n      \n//   //     .then((response)  => { \n//   //       setTitle(response.data.title);\n//   //       setContent(response.data.content);\n//   //       setImg(response.data.img);\n//   //     })\n      \n//   //   }, [])\n    \n//   //   const data = {\n//   //     title: title,\n//   //     content: content,\n\n//   // }\n\n//   //   function Update(e) {\n//   //     e.preventDefault()\n\n//   //     const formData = new FormData();\n//   //     formData.append(\"files\",img[0]);\n  \n    \n//   //   const json = JSON.stringify(data)\n//   //   const blob = new Blob([json], { type: \"application/json\" });\n//   //   formData.append(\"boardsUpdateRequest\", blob); \n\n//   //   console.log(formData)\n\n//   //     axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//   //     axios.put(`/api/v1/boards/${boardsId}`, formData)\n//   //     .then(\n//   //         // window.location.href = `/marketdetail/${boardsId}`,\n//   //         alert('수정되었습니다.')\n//   //     )\n//   //   }\n\n\n\n\n\n\n\n//     useEffect(() => {\n\n//       axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//       axios.get(`/api/v1/boards/${boardsId}/detail`)\n      \n//       .then((response)  => { \n//         setTitle(response.data.title);\n//         setContent(response.data.content);\n//         setImg(response.data.img);\n//       })\n      \n//     }, [])\n\n//     const onSubmit = async () => {\n//       const formData = new FormData();\n//         if(img.image_file){\n          \n//           formData.append(\"files\", img.image_file);}\n    \n//           let dataSet = {\n//             title,\n//             content,\n//           };\n      \n//         const json = JSON.stringify(dataSet)\n//         const blob = new Blob([json], { type: \"application/json\" });\n//         formData.append(\"boardsUpdateRequest\", blob); \n\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         await axios.put(`/api/v1/boards/${boardsId}`, formData, {\n//               headers: {\n//               \"Content-Type\": \"multipart/form-data\", \n//           }})\n\n//             window.location.href = `/marketdetail/${boardsId}`;\n//             alert('수정되었습니다.');\n\n      \n//     }\n   \n//     return (\n//       <form >\n//           제 목 <input \n//           value={title}\n//           onChange={(e)=> {setTitle(e.target.value)}}\n//           type=\"text\"\n//           placeholder=\"제목을 입력하세요\"\n//       /><br/>\n//       내 용 <input \n//           value={content}\n//           onChange={(e)=> {setContent(e.target.value)}}\n//           type=\"text\"\n//           placeholder=\"내용을 입력하세요\"\n//       /><br/>\n\n//       이미지 <img \n//           src={img}\n//           alt=\"\"\n//           width=\"20%\" height=\"200px\"\n//           onChange={(e)=> {setImg(e.target.files)}}\n//       />\n      \n//         <input \n//           type=\"file\"\n//           accept=\"image/*\"\n//           onChange={saveImage}\n//           onClick={(e) => e.target.value = null}\n//         /><br/>\n\n//         <div>\n//           <img src={img.preview_URL} width=\"20%\" height=\"200px\" />\n//           <Button color=\"error\" variant=\"contained\" onClick={deleteImage}>\n//             <i class=\"fa-solid fa-xmark\"></i>\n//           </Button>\n//         </div>\n\n//         <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//         <Button variant=\"outline-success\" onClick={onSubmit}>\n//           수정\n//         </Button>\n\n//       </form>\n//   );\n// }\n\n// export default MarketChange;\n\nimport {useSelector} from \"react-redux\";\nimport {useNavigate, useParams} from \"react-router-dom\";\nimport {useCallback, useEffect, useState} from \"react\";\nimport ImageUploader from \"./ImageUploader\";\nimport TextArea from \"./TextArea\";\nimport {Button} from \"@mui/material\";\nimport axios from \"axios\";\n\n\nconst MarketChange = () => {\n  const navigate = useNavigate();\n  // URI 파라미터 가져오기\n  const {boardsId} = useParams();\n  // 게시판 제목, 내용, 사진\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [image, setImage] = useState({\n    image_file: \"\",\n    preview_URL: `/api/v1/boards/${boardsId}/detail/images`});\n\n  // 사용자가 직전에 등록한 게시물의 상태를 그대로 보여주기 위해\n  // 컴포넌트가 마운트되고 URI 파라미터에 해당하는 board를 가져와서\n  // title, content, image의 상태를 바꿔줌\n  useEffect(() => {\n    const getBoard = async () => {\n      axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n      const {data} = await axios.get(`/api/v1/boards/${boardsId}/detail`);\n      return data;\n    }\n    getBoard().then((result) => {\n      console.log(result)\n      setTitle(result.title);\n      setContent(result.content);\n      // 이미지는 파일을 불러올 필요가 없이 미리보기 url만 가져온다.\n      // 이미지를 선택하지 않고 올리면 db에 저장되어 있는 이미지를 그대로 사용!\n      setImage({...image, preview_URL: `/api/v1/boards/${boardsId}/detail/images`})\n      console.log(result.img)\n      console.log(image)\n    });\n  }, [])\n\n  const canSubmit = useCallback(() => {\n    return content !== \"\" && title !== \"\";\n  }, [image, title, content]);\n\n\n\n  const handleSubmit = useCallback(async () => {\n    try {\n\n      const formData = new FormData();\n      \n      const data = {\n        title: title,\n        content: content\n      }\n      const json = JSON.stringify(data)\n      const blob = new Blob([json], { type: \"application/json\" });\n      formData.append(\"boardsUpdateRequest\", blob);\n\n      formData.append(\"files\", image.image_file);\n\n      console.log(...formData)\n\n      // formData.append(\"title\", title);\n      // formData.append(\"content\", content);\n      // // 이미지를 선택했을 때만 formdata에 넣음\n      // formData.append(\"file\", image.image_file);\n      // // 수정할 땐 board_id를 보내자\n\n      axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n      await axios.put(`/api/v1/boards/${boardsId}`, formData);\n      window.alert(\"😎수정이 완료되었습니다😎\");\n      // 이전 페이지로 돌아가기\n      window.location.href = `/marketdetail/${boardsId}`;\n    } catch (e) {\n      // 서버에서 받은 에러 메시지 출력\n\n    }\n\n  }, [canSubmit]);\n\n  return (\n    <div className=\"addBoard-wrapper\">\n      <div className=\"addBoard-header\">\n        게시물 수정하기 🖊️\n      </div>\n\n      <div className=\"addBoard-body\">\n        <div className=\"text\">\n          제 목 <input\n            onChange={(e) => {setTitle(e.target.value);}}\n            className=\"title\"\n            value={title}\n          /><br/>\n          내 용 <textarea\n            onChange={(e) => {setContent(e.target.value);}}\n            className=\"text\"\n            value={content}\n          />\n        </div>\n        <ImageUploader setImage={setImage} preview_URL={image.preview_URL} width=\"20%\" height=\"200px\"/>\n      </div>\n\n      <div className=\"submitButton\">\n        {canSubmit() ? (\n          <Button\n            onClick={handleSubmit}\n            className=\"success-button\"\n            variant=\"outlined\"\n          >\n            수정하기😃\n          </Button>\n        ) : (\n          <Button\n            className=\"disable-button\"\n            variant=\"outlined\"\n            size=\"large\"\n          >\n            제목과 내용을 모두 입력하세요😭\n          </Button>\n        )}\n      </div>\n    </div>\n\n\n    \n  );\n}\n\nexport default MarketChange"],"mappings":";;;AAAA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAKA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAIA;AAEA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAIA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AAGA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AAEA;AACA;AAGA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AAQA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AAEA;AACA;AACA;AAEA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AAEA,SAAQA,WAAR,QAA0B,aAA1B;AACA,SAAQC,WAAR,EAAqBC,SAArB,QAAqC,kBAArC;AACA,SAAQC,WAAR,EAAqBC,SAArB,EAAgCC,QAAhC,QAA+C,OAA/C;AACA,OAAOC,aAAP,MAA0B,iBAA1B;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAAQC,MAAR,QAAqB,eAArB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;;AAGA,MAAMC,YAAY,GAAG,MAAM;EAAA;;EACzB,MAAMC,QAAQ,GAAGV,WAAW,EAA5B,CADyB,CAEzB;;EACA,MAAM;IAACW;EAAD,IAAaV,SAAS,EAA5B,CAHyB,CAIzB;;EACA,MAAM,CAACW,KAAD,EAAQC,QAAR,IAAoBT,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACU,OAAD,EAAUC,UAAV,IAAwBX,QAAQ,CAAC,EAAD,CAAtC;EACA,MAAM,CAACY,KAAD,EAAQC,QAAR,IAAoBb,QAAQ,CAAC;IACjCc,UAAU,EAAE,EADqB;IAEjCC,WAAW,EAAG,kBAAiBR,QAAS;EAFP,CAAD,CAAlC,CAPyB,CAWzB;EACA;EACA;;EACAR,SAAS,CAAC,MAAM;IACd,MAAMiB,QAAQ,GAAG,YAAY;MAC3BZ,KAAK,CAACa,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,aAA9B,IAAgD,UAASC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+B,EAAxF;MACA,MAAM;QAACC;MAAD,IAAS,MAAMlB,KAAK,CAACmB,GAAN,CAAW,kBAAiBhB,QAAS,SAArC,CAArB;MACA,OAAOe,IAAP;IACD,CAJD;;IAKAN,QAAQ,GAAGQ,IAAX,CAAiBC,MAAD,IAAY;MAC1BC,OAAO,CAACC,GAAR,CAAYF,MAAZ;MACAhB,QAAQ,CAACgB,MAAM,CAACjB,KAAR,CAAR;MACAG,UAAU,CAACc,MAAM,CAACf,OAAR,CAAV,CAH0B,CAI1B;MACA;;MACAG,QAAQ,CAAC,EAAC,GAAGD,KAAJ;QAAWG,WAAW,EAAG,kBAAiBR,QAAS;MAAnD,CAAD,CAAR;MACAmB,OAAO,CAACC,GAAR,CAAYF,MAAM,CAACG,GAAnB;MACAF,OAAO,CAACC,GAAR,CAAYf,KAAZ;IACD,CATD;EAUD,CAhBQ,EAgBN,EAhBM,CAAT;EAkBA,MAAMiB,SAAS,GAAG/B,WAAW,CAAC,MAAM;IAClC,OAAOY,OAAO,KAAK,EAAZ,IAAkBF,KAAK,KAAK,EAAnC;EACD,CAF4B,EAE1B,CAACI,KAAD,EAAQJ,KAAR,EAAeE,OAAf,CAF0B,CAA7B;EAMA,MAAMoB,YAAY,GAAGhC,WAAW,CAAC,YAAY;IAC3C,IAAI;MAEF,MAAMiC,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;MAEA,MAAMV,IAAI,GAAG;QACXd,KAAK,EAAEA,KADI;QAEXE,OAAO,EAAEA;MAFE,CAAb;MAIA,MAAMuB,IAAI,GAAGC,IAAI,CAACC,SAAL,CAAeb,IAAf,CAAb;MACA,MAAMc,IAAI,GAAG,IAAIC,IAAJ,CAAS,CAACJ,IAAD,CAAT,EAAiB;QAAEK,IAAI,EAAE;MAAR,CAAjB,CAAb;MACAP,QAAQ,CAACQ,MAAT,CAAgB,qBAAhB,EAAuCH,IAAvC;MAEAL,QAAQ,CAACQ,MAAT,CAAgB,OAAhB,EAAyB3B,KAAK,CAACE,UAA/B;MAEAY,OAAO,CAACC,GAAR,CAAY,GAAGI,QAAf,EAdE,CAgBF;MACA;MACA;MACA;MACA;;MAEA3B,KAAK,CAACa,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,aAA9B,IAAgD,UAASC,YAAY,CAACC,OAAb,CAAqB,QAArB,CAA+B,EAAxF;MACA,MAAMjB,KAAK,CAACoC,GAAN,CAAW,kBAAiBjC,QAAS,EAArC,EAAwCwB,QAAxC,CAAN;MACAU,MAAM,CAACC,KAAP,CAAa,iBAAb,EAxBE,CAyBF;;MACAD,MAAM,CAACE,QAAP,CAAgBC,IAAhB,GAAwB,iBAAgBrC,QAAS,EAAjD;IACD,CA3BD,CA2BE,OAAOsC,CAAP,EAAU,CACV;IAED;EAEF,CAjC+B,EAiC7B,CAAChB,SAAD,CAjC6B,CAAhC;EAmCA,oBACE;IAAK,SAAS,EAAC,kBAAf;IAAA,wBACE;MAAK,SAAS,EAAC,iBAAf;MAAA;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAKE;MAAK,SAAS,EAAC,eAAf;MAAA,wBACE;QAAK,SAAS,EAAC,MAAf;QAAA,0CACM;UACF,QAAQ,EAAGgB,CAAD,IAAO;YAACpC,QAAQ,CAACoC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAR;UAA0B,CAD1C;UAEF,SAAS,EAAC,OAFR;UAGF,KAAK,EAAEvC;QAHL;UAAA;UAAA;UAAA;QAAA,QADN,eAKI;UAAA;UAAA;UAAA;QAAA,QALJ,iCAMM;UACF,QAAQ,EAAGqC,CAAD,IAAO;YAAClC,UAAU,CAACkC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAV;UAA4B,CAD5C;UAEF,SAAS,EAAC,MAFR;UAGF,KAAK,EAAErC;QAHL;UAAA;UAAA;UAAA;QAAA,QANN;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eAaE,QAAC,aAAD;QAAe,QAAQ,EAAEG,QAAzB;QAAmC,WAAW,EAAED,KAAK,CAACG,WAAtD;QAAmE,KAAK,EAAC,KAAzE;QAA+E,MAAM,EAAC;MAAtF;QAAA;QAAA;QAAA;MAAA,QAbF;IAAA;MAAA;MAAA;MAAA;IAAA,QALF,eAqBE;MAAK,SAAS,EAAC,cAAf;MAAA,UACGc,SAAS,kBACR,QAAC,MAAD;QACE,OAAO,EAAEC,YADX;QAEE,SAAS,EAAC,gBAFZ;QAGE,OAAO,EAAC,UAHV;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QADQ,gBASR,QAAC,MAAD;QACE,SAAS,EAAC,gBADZ;QAEE,OAAO,EAAC,UAFV;QAGE,IAAI,EAAC,OAHP;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA;IAVJ;MAAA;MAAA;MAAA;IAAA,QArBF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AA8CD,CAvHD;;GAAMzB,Y;UACaT,W,EAEEC,S;;;KAHfQ,Y;AAyHN,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}