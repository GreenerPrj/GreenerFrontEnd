{"ast":null,"code":"var _jsxFileName = \"/Users/bag-yeongmi/GreenerFrontEnd/src/Components/pages/board/MarketChange.js\",\n    _s = $RefreshSig$();\n\n// import React, { useState, useEffect } from \"react\";\n// import { useNavigate, useParams } from 'react-router-dom';\n// import axios from 'axios';\n// import { Button } from \"react-bootstrap\";\n// function MarketChange() {\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [img, setImg] = useState(\"\");\n//     const [look, setLook] = useState()\n//     const {boardsId} = useParams();\n//     // const One = () => {\n//     //   axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//     //     axios.get(`/api/v1/boards/${boardsId}/detail`)\n//     //     .then((response)  => { \n//     //       setTitle(response.data.title);\n//     //       setContent(response.data.content);\n//     //       setImg(response.data.img);\n//     //     })\n//     // }\n//     useEffect(() => {\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.get(`/api/v1/boards/${boardsId}/detail`)\n//         .then((response)  => { \n//           setTitle(response.data.title);\n//           setContent(response.data.content);\n//           setImg(response.data.img);\n//           console.log(response.data.img)\n//         })\n//       }, [])\n//     // useEffect(One, [img])\n//       const data = {\n//         title: title,\n//         content: content,\n//         img: img\n//     }\n//       function Update(e) {\n//         e.preventDefault()\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.put(`/api/v1/boards/${boardsId}`, data)\n//         .then(\n//             window.location.href = \"/market\",\n//             alert('수정되었습니다.')\n//         )\n//       }\n//       // const FileDelete = () => {\n//       //   response.data.img = \"\"\n//       //   console.log(data.img)\n//       // }\n// return (\n//     <>\n//     <h1>수정하기</h1>\n//     <form>\n//     제 목 <input \n//         value={title}\n//         onChange={(e)=> {setTitle(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     내 용 <input \n//         value={content}\n//         onChange={(e)=> {setContent(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     이미지 <img \n//         src={img}\n//         alt=\"\"\n//         width=\"20%\" height=\"200px\"\n//         // placeholder=\"이미지를 등록하세요\"\n//         // onChange={(e)=> {setImg(e.target.value)}}\n//     />\n//     {/* <button onClick={() => FileDelete()}>삭제</button> */}\n//     <input \n//           type=\"file\"\n//           multiple=\"multiple\"\n//           onChange={(e) => {setImg(e.target.value)}}\n//         /><br/>\n//   <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//   <Button onClick={Update} variant=\"outline-success\">&nbsp; 수정 &nbsp;</Button>\n//     </form>\n//     </>\n//     )\n// }\n// export default MarketChange;\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { Button } from \"react-bootstrap\";\nimport ImageUploader from \"./ImageUploader\";\nimport TextArea from \"./TextArea\";\nimport { Toast } from \"bootstrap\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst MarketChange = () => {\n  _s();\n\n  const [title, setTitle] = useState(\"\");\n  const [content, setContent] = useState(\"\");\n  const [img, setImg] = useState({\n    image_file: \"\",\n    preview_URL: \"image/logo192.png\"\n  });\n  const {\n    boardsId\n  } = useParams();\n  useEffect(() => {\n    const getBoard = async () => {\n      axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n      const {\n        data\n      } = await axios.get(`/api/v1/boards/${boardsId}/detail`);\n      return data;\n    };\n\n    getBoard().then(result => {\n      setTitle(result.title);\n      setContent(result.content);\n      setImg({\n        preview_URL: `/api/v1/boards/${boardsId}/detail`\n      });\n      console.log(result.img);\n    });\n  }, []);\n  const canSubmit = useCallback(() => {\n    return title !== \"\" && content !== \"\";\n  }, [img, title, content]);\n  const handleSubmit = useCallback(async () => {\n    try {\n      const formData = new FormData();\n      formData.append(\"title\", title);\n      formData.append(\"content\", content);\n      formData.append(\"file\", img.image_file);\n      axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n      await axios.put(`/api/v1/boards/${boardsId}`, formData);\n      window.alert(\"수정되었습니다.\");\n      window.location.href = \"/market\";\n    } catch (e) {}\n  }, [canSubmit]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"addBoard-wrapper\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"addBoard-header\",\n      children: \"\\uAC8C\\uC2DC\\uBB3C \\uC218\\uC815\\uD558\\uAE30 \\uD83D\\uDD8A\\uFE0F\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"submitButton\",\n      children: canSubmit() ? /*#__PURE__*/_jsxDEV(Button, {\n        onClick: handleSubmit,\n        className: \"success-button\",\n        variant: \"outlined\",\n        children: \"\\uC218\\uC815\\uD558\\uAE30\\uD83D\\uDE03\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 15\n      }, this) : /*#__PURE__*/_jsxDEV(Button, {\n        className: \"disable-button\",\n        variant: \"outlined\",\n        size: \"large\",\n        children: \"\\uC81C\\uBAA9\\uACFC \\uB0B4\\uC6A9\\uC744 \\uBAA8\\uB450 \\uC785\\uB825\\uD558\\uC138\\uC694\\uD83D\\uDE2D\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"addBoard-body\",\n      children: [/*#__PURE__*/_jsxDEV(ImageUploader, {\n        setImage: setImg,\n        preview_URL: img.preview_URL\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 185,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(TextArea, {\n        setTitle: setTitle,\n        setContent: setContent,\n        title: title,\n        content: content\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 9\n  }, this);\n};\n\n_s(MarketChange, \"38vnvfgIlZYwxDcKTcGRCeSkp88=\", false, function () {\n  return [useParams];\n});\n\n_c = MarketChange;\nexport default MarketChange;\n\nvar _c;\n\n$RefreshReg$(_c, \"MarketChange\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useParams","axios","Button","ImageUploader","TextArea","Toast","MarketChange","title","setTitle","content","setContent","img","setImg","image_file","preview_URL","boardsId","getBoard","defaults","headers","common","localStorage","getItem","data","get","then","result","console","log","canSubmit","handleSubmit","formData","FormData","append","put","window","alert","location","href","e"],"sources":["/Users/bag-yeongmi/GreenerFrontEnd/src/Components/pages/board/MarketChange.js"],"sourcesContent":["// import React, { useState, useEffect } from \"react\";\n// import { useNavigate, useParams } from 'react-router-dom';\n// import axios from 'axios';\n// import { Button } from \"react-bootstrap\";\n\n// function MarketChange() {\n\n//     const [title, setTitle] = useState(\"\");\n//     const [content, setContent] = useState(\"\");\n//     const [img, setImg] = useState(\"\");\n//     const [look, setLook] = useState()\n\n//     const {boardsId} = useParams();\n\n//     // const One = () => {\n//     //   axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//     //     axios.get(`/api/v1/boards/${boardsId}/detail`)\n        \n//     //     .then((response)  => { \n//     //       setTitle(response.data.title);\n//     //       setContent(response.data.content);\n//     //       setImg(response.data.img);\n          \n//     //     })\n//     // }\n\n//     useEffect(() => {\n       \n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.get(`/api/v1/boards/${boardsId}/detail`)\n        \n//         .then((response)  => { \n//           setTitle(response.data.title);\n//           setContent(response.data.content);\n//           setImg(response.data.img);\n//           console.log(response.data.img)\n//         })\n        \n//       }, [])\n\n//     // useEffect(One, [img])\n      \n//       const data = {\n//         title: title,\n//         content: content,\n//         img: img\n//     }\n\n//       function Update(e) {\n//         e.preventDefault()\n\n//         axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n//         axios.put(`/api/v1/boards/${boardsId}`, data)\n//         .then(\n//             window.location.href = \"/market\",\n//             alert('수정되었습니다.')\n//         )\n//       }\n\n//       // const FileDelete = () => {\n//       //   response.data.img = \"\"\n//       //   console.log(data.img)\n//       // }\n\n\n// return (\n//     <>\n//     <h1>수정하기</h1>\n//     <form>\n//     제 목 <input \n//         value={title}\n//         onChange={(e)=> {setTitle(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     내 용 <input \n//         value={content}\n//         onChange={(e)=> {setContent(e.target.value)}}\n//         type=\"text\"\n//     /><br/>\n//     이미지 <img \n//         src={img}\n//         alt=\"\"\n//         width=\"20%\" height=\"200px\"\n//         // placeholder=\"이미지를 등록하세요\"\n//         // onChange={(e)=> {setImg(e.target.value)}}\n//     />\n//     {/* <button onClick={() => FileDelete()}>삭제</button> */}\n\n//     <input \n//           type=\"file\"\n//           multiple=\"multiple\"\n//           onChange={(e) => {setImg(e.target.value)}}\n//         /><br/>\n//   <Button href={`/marketdetail/${boardsId}`} variant=\"outline-secondary\">&nbsp; 취소 &nbsp;</Button>\n//   <Button onClick={Update} variant=\"outline-success\">&nbsp; 수정 &nbsp;</Button>\n\n//     </form>\n//     </>\n//     )\n// }\n\n// export default MarketChange;\n\n\nimport React, { useState, useEffect, useCallback } from \"react\";\nimport { useNavigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { Button } from \"react-bootstrap\";\nimport ImageUploader from \"./ImageUploader\";\nimport TextArea from \"./TextArea\";\nimport { Toast } from \"bootstrap\";\n\nconst MarketChange = () => {\n\n    const [title, setTitle] = useState(\"\");\n    const [content, setContent] = useState(\"\");\n    const [img, setImg] = useState({\n      image_file: \"\",\n      preview_URL: \"image/logo192.png\"\n    });\n\n    const {boardsId} = useParams();\n\n    useEffect(() => {\n      const getBoard = async () => {\n        axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`\n        const {data} = await axios.get(`/api/v1/boards/${boardsId}/detail`)\n        return data\n      }\n      getBoard()\n        .then((result)  => { \n          setTitle(result.title);\n          setContent(result.content);\n          setImg({preview_URL: `/api/v1/boards/${boardsId}/detail`});\n          console.log(result.img)\n        })\n        \n      }, [])\n\n      const canSubmit = useCallback(() => {\n        return title !== \"\" && content !== \"\";\n      }, [img, title, content]);\n\n      const handleSubmit = useCallback(async () => {\n        try {\n          const formData = new FormData();\n          formData.append(\"title\", title)\n          formData.append(\"content\", content)\n          formData.append(\"file\", img.image_file)\n          axios.defaults.headers.common['accessToken'] = `Bearer ${localStorage.getItem(\"access\")}`;\n          await axios.put(`/api/v1/boards/${boardsId}`, formData)\n          window.alert(\"수정되었습니다.\")\n          window.location.href = \"/market\"\n        } catch (e) {\n\n        }\n      }, [canSubmit])\n\n\n      return (\n        <div className=\"addBoard-wrapper\">\n          <div className=\"addBoard-header\">\n            게시물 수정하기 🖊️\n          </div>\n          <div className=\"submitButton\">\n            {canSubmit() ? (\n              <Button\n                onClick={handleSubmit}\n                className=\"success-button\"\n                variant=\"outlined\"\n              >\n                수정하기😃\n              </Button>\n            ) : (\n              <Button\n                className=\"disable-button\"\n                variant=\"outlined\"\n                size=\"large\"\n              >\n                제목과 내용을 모두 입력하세요😭\n              </Button>\n            )}\n          </div>\n          <div className=\"addBoard-body\">\n            <ImageUploader setImage={setImg} preview_URL={img.preview_URL}/>\n            <TextArea setTitle={setTitle} setContent={setContent} title={title} content={content}/>\n          </div>\n        </div>\n      );\n    }\n\nexport default MarketChange;"],"mappings":"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"},"metadata":{},"sourceType":"module"}